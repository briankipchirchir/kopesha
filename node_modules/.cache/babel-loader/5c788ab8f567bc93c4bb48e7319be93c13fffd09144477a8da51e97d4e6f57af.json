{"ast":null,"code":"import React,{useState,useRef,useEffect}from'react';import{useLocation,useNavigate}from'react-router-dom';import'../styles/LoanApproval.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const LoanApproval=()=>{const location=useLocation();const navigate=useNavigate();const intervalRef=useRef(null);const timeoutRef=useRef(null);const isPollingRef=useRef(false);const formData=location.state||{};const trackingId=formData.trackingId||'N/A';/* ---------------- LOAN OPTIONS ---------------- */const loanOffers=[{id:1,amount:2000,verificationFee:100,duration:'2 months',interest:'10%'},{id:2,amount:3000,verificationFee:150,duration:'2 months',interest:'10%'},{id:3,amount:4000,verificationFee:190,duration:'2 months',interest:'10%'},{id:4,amount:5000,verificationFee:200,duration:'2 months',interest:'10%'},{id:5,amount:6000,verificationFee:240,duration:'2 months',interest:'10%'},{id:6,amount:10000,verificationFee:350,duration:'3 months',interest:'12%'},{id:7,amount:20000,verificationFee:600,duration:'4 months',interest:'15%'}];const[selectedLoan,setSelectedLoan]=useState(null);const[paymentStatus,setPaymentStatus]=useState('');const[isLoading,setIsLoading]=useState(false);const[checkoutRequestID,setCheckoutRequestID]=useState(null);/* ---------------- CLEANUP ---------------- */useEffect(()=>{return()=>{if(intervalRef.current)clearInterval(intervalRef.current);if(timeoutRef.current)clearTimeout(timeoutRef.current);};},[]);/* ---------------- HANDLE LOAN PAYMENT ---------------- */const handleGetLoan=async()=>{if(!selectedLoan){alert('Please select a loan option');return;}if(isPollingRef.current)return;try{if(intervalRef.current)clearInterval(intervalRef.current);if(timeoutRef.current)clearTimeout(timeoutRef.current);isPollingRef.current=true;setIsLoading(true);setPaymentStatus('pending');const response=await fetch('https://kopesha-backend-3.onrender.com/api/loans/stk-push',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({trackingId,phone:formData.phone,amount:selectedLoan.verificationFee})});const data=JSON.parse(await response.text());const requestID=data.CheckoutRequestID;if(!requestID){setPaymentStatus('failed');setIsLoading(false);isPollingRef.current=false;alert('STK Push initiated but no CheckoutRequestID received');return;}setCheckoutRequestID(requestID);let pollCount=0;const maxPolls=100;intervalRef.current=setInterval(async()=>{pollCount++;try{const statusRes=await fetch(\"https://kopesha-backend-3.onrender.com/api/loans/mpesa/status/\".concat(requestID));if(!statusRes.ok)return;const statusData=await statusRes.json();switch(statusData.status){case'PENDING':setPaymentStatus('pending');break;case'success':setPaymentStatus('success');clearInterval(intervalRef.current);clearTimeout(timeoutRef.current);isPollingRef.current=false;setIsLoading(false);break;case'CANCELLED':setPaymentStatus('cancelled');clearInterval(intervalRef.current);clearTimeout(timeoutRef.current);isPollingRef.current=false;setIsLoading(false);break;case'FAILED':setPaymentStatus('failed');clearInterval(intervalRef.current);clearTimeout(timeoutRef.current);isPollingRef.current=false;setIsLoading(false);break;default:break;}}catch(err){console.error('Status check error:',err);}if(pollCount>=maxPolls){setPaymentStatus('timeout');clearInterval(intervalRef.current);isPollingRef.current=false;setIsLoading(false);}},3000);timeoutRef.current=setTimeout(()=>{clearInterval(intervalRef.current);setPaymentStatus('timeout');isPollingRef.current=false;setIsLoading(false);},300000);}catch(error){console.error('STK Push error:',error);setPaymentStatus('failed');setIsLoading(false);isPollingRef.current=false;}};/* ---------------- AUTO CLEAR STATUS ---------------- */useEffect(()=>{if(paymentStatus&&paymentStatus!=='pending'){const timer=setTimeout(()=>setPaymentStatus(''),5000);return()=>clearTimeout(timer);}},[paymentStatus]);const handleGoBack=()=>{if(intervalRef.current)clearInterval(intervalRef.current);if(timeoutRef.current)clearTimeout(timeoutRef.current);navigate('/');};const renderStatusMessage=()=>{switch(paymentStatus){case'pending':return/*#__PURE__*/_jsx(\"p\",{children:\"Waiting for payment... (STK prompt sent)\"});case'success':return/*#__PURE__*/_jsx(\"p\",{style:{color:'green'},children:\"Payment Successful \\u2705 Loan processing started.\"});case'cancelled':return/*#__PURE__*/_jsx(\"p\",{style:{color:'red'},children:\"Payment Cancelled \\u274C\"});case'timeout':return/*#__PURE__*/_jsx(\"p\",{style:{color:'orange'},children:\"Request Timeout\"});case'failed':return/*#__PURE__*/_jsx(\"p\",{style:{color:'red'},children:\"Payment Failed \\u274C\"});default:return null;}};/* ---------------- UI ---------------- */return/*#__PURE__*/_jsx(\"div\",{className:\"approval-container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"approval-card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"approval-header\",children:/*#__PURE__*/_jsxs(\"p\",{children:[\"Hi \",formData.name||'User',\", select a loan option below. Terms and conditions apply.\"]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"approval-body\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"loan-options\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Select a loan option\"}),loanOffers.map(offer=>/*#__PURE__*/_jsxs(\"div\",{className:\"loan-option-card \".concat((selectedLoan===null||selectedLoan===void 0?void 0:selectedLoan.id)===offer.id?'selected':''),onClick:()=>setSelectedLoan(offer),children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"strong\",{children:[\"Ksh. \",offer.amount.toLocaleString()]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Duration: \",offer.duration]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Interest: \",offer.interest]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[\"Verification Fee: \",/*#__PURE__*/_jsxs(\"strong\",{children:[\"Ksh. \",offer.verificationFee]})]})]},offer.id))]}),/*#__PURE__*/_jsxs(\"div\",{className:\"approval-table\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"approval-row\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"approval-label\",children:\"Loan Tracking ID:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"approval-value\",children:trackingId})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"approval-row\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"approval-label\",children:\"MPESA Number:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"approval-value\",children:formData.phone||'N/A'})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"approval-row\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"approval-label\",children:\"Selected Loan:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"approval-value\",children:selectedLoan?\"Ksh. \".concat(selectedLoan.amount.toLocaleString()):'None'})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"approval-row\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"approval-label\",children:\"Verification Fee:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"approval-value\",children:selectedLoan?\"Ksh. \".concat(selectedLoan.verificationFee):'-'})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"approval-footer\",children:[renderStatusMessage(),/*#__PURE__*/_jsx(\"button\",{onClick:handleGetLoan,className:\"get-loan-btn\",disabled:isLoading||!selectedLoan||paymentStatus==='success',children:isLoading?'Processing...':'Get Loan Now'}),/*#__PURE__*/_jsxs(\"div\",{className:\"approval-footer-text\",children:[\"\\xA9 2025. All rights reserved. Go back\",' ',/*#__PURE__*/_jsx(\"span\",{onClick:handleGoBack,style:{cursor:'pointer'},children:\"home\"})]})]})]})]})});};export default LoanApproval;","map":{"version":3,"names":["React","useState","useRef","useEffect","useLocation","useNavigate","jsx","_jsx","jsxs","_jsxs","LoanApproval","location","navigate","intervalRef","timeoutRef","isPollingRef","formData","state","trackingId","loanOffers","id","amount","verificationFee","duration","interest","selectedLoan","setSelectedLoan","paymentStatus","setPaymentStatus","isLoading","setIsLoading","checkoutRequestID","setCheckoutRequestID","current","clearInterval","clearTimeout","handleGetLoan","alert","response","fetch","method","headers","body","JSON","stringify","phone","data","parse","text","requestID","CheckoutRequestID","pollCount","maxPolls","setInterval","statusRes","concat","ok","statusData","json","status","err","console","error","setTimeout","timer","handleGoBack","renderStatusMessage","children","style","color","className","name","map","offer","onClick","toLocaleString","disabled","cursor"],"sources":["/home/kipchirchir/loan/kopesha-loan-app/src/components/LoanApproval.js"],"sourcesContent":["import React, { useState, useRef, useEffect } from 'react';\nimport { useLocation, useNavigate } from 'react-router-dom';\nimport '../styles/LoanApproval.css';\n\nconst LoanApproval = () => {\n  const location = useLocation();\n  const navigate = useNavigate();\n\n  const intervalRef = useRef(null);\n  const timeoutRef = useRef(null);\n  const isPollingRef = useRef(false);\n\n  const formData = location.state || {};\n  const trackingId = formData.trackingId || 'N/A';\n\n  /* ---------------- LOAN OPTIONS ---------------- */\n  const loanOffers = [\n    {\n      id: 1,\n      amount: 2000,\n      verificationFee: 100,\n      duration: '2 months',\n      interest: '10%',\n    },\n      {\n      id: 2,\n      amount: 3000,\n      verificationFee: 150,\n      duration: '2 months',\n      interest: '10%',\n    },\n      {\n      id: 3,\n      amount: 4000,\n      verificationFee: 190,\n      duration: '2 months',\n      interest: '10%',\n    },\n      {\n      id: 4,\n      amount: 5000,\n      verificationFee: 200,\n      duration: '2 months',\n      interest: '10%',\n    },\n      {\n      id: 5,\n      amount: 6000,\n      verificationFee: 240,\n      duration: '2 months',\n      interest: '10%',\n    },\n    {\n      id: 6,\n      amount: 10000,\n      verificationFee: 350,\n      duration: '3 months',\n      interest: '12%',\n    },\n    {\n      id: 7,\n      amount: 20000,\n      verificationFee: 600,\n      duration: '4 months',\n      interest: '15%',\n    },\n  ];\n\n  const [selectedLoan, setSelectedLoan] = useState(null);\n  const [paymentStatus, setPaymentStatus] = useState('');\n  const [isLoading, setIsLoading] = useState(false);\n  const [checkoutRequestID, setCheckoutRequestID] = useState(null);\n\n  /* ---------------- CLEANUP ---------------- */\n  useEffect(() => {\n    return () => {\n      if (intervalRef.current) clearInterval(intervalRef.current);\n      if (timeoutRef.current) clearTimeout(timeoutRef.current);\n    };\n  }, []);\n\n  /* ---------------- HANDLE LOAN PAYMENT ---------------- */\n  const handleGetLoan = async () => {\n    if (!selectedLoan) {\n      alert('Please select a loan option');\n      return;\n    }\n\n    if (isPollingRef.current) return;\n\n    try {\n      if (intervalRef.current) clearInterval(intervalRef.current);\n      if (timeoutRef.current) clearTimeout(timeoutRef.current);\n\n      isPollingRef.current = true;\n      setIsLoading(true);\n      setPaymentStatus('pending');\n\n      const response = await fetch(\n        'https://kopesha-backend-3.onrender.com/api/loans/stk-push',\n        {\n          method: 'POST',\n          headers: { 'Content-Type': 'application/json' },\n          body: JSON.stringify({\n            trackingId,\n            phone: formData.phone,\n            amount: selectedLoan.verificationFee,\n          }),\n        }\n      );\n\n      const data = JSON.parse(await response.text());\n      const requestID = data.CheckoutRequestID;\n\n      if (!requestID) {\n        setPaymentStatus('failed');\n        setIsLoading(false);\n        isPollingRef.current = false;\n        alert('STK Push initiated but no CheckoutRequestID received');\n        return;\n      }\n\n      setCheckoutRequestID(requestID);\n\n      let pollCount = 0;\n      const maxPolls = 100;\n\n      intervalRef.current = setInterval(async () => {\n        pollCount++;\n\n        try {\n          const statusRes = await fetch(\n            `https://kopesha-backend-3.onrender.com/api/loans/mpesa/status/${requestID}`\n          );\n\n          if (!statusRes.ok) return;\n\n          const statusData = await statusRes.json();\n\n          switch (statusData.status) {\n            case 'PENDING':\n              setPaymentStatus('pending');\n              break;\n            case 'success':\n              setPaymentStatus('success');\n              clearInterval(intervalRef.current);\n              clearTimeout(timeoutRef.current);\n              isPollingRef.current = false;\n              setIsLoading(false);\n              break;\n            case 'CANCELLED':\n              setPaymentStatus('cancelled');\n              clearInterval(intervalRef.current);\n              clearTimeout(timeoutRef.current);\n              isPollingRef.current = false;\n              setIsLoading(false);\n              break;\n            case 'FAILED':\n              setPaymentStatus('failed');\n              clearInterval(intervalRef.current);\n              clearTimeout(timeoutRef.current);\n              isPollingRef.current = false;\n              setIsLoading(false);\n              break;\n            default:\n              break;\n          }\n        } catch (err) {\n          console.error('Status check error:', err);\n        }\n\n        if (pollCount >= maxPolls) {\n          setPaymentStatus('timeout');\n          clearInterval(intervalRef.current);\n          isPollingRef.current = false;\n          setIsLoading(false);\n        }\n      }, 3000);\n\n      timeoutRef.current = setTimeout(() => {\n        clearInterval(intervalRef.current);\n        setPaymentStatus('timeout');\n        isPollingRef.current = false;\n        setIsLoading(false);\n      }, 300000);\n\n    } catch (error) {\n      console.error('STK Push error:', error);\n      setPaymentStatus('failed');\n      setIsLoading(false);\n      isPollingRef.current = false;\n    }\n  };\n\n  /* ---------------- AUTO CLEAR STATUS ---------------- */\n  useEffect(() => {\n    if (paymentStatus && paymentStatus !== 'pending') {\n      const timer = setTimeout(() => setPaymentStatus(''), 5000);\n      return () => clearTimeout(timer);\n    }\n  }, [paymentStatus]);\n\n  const handleGoBack = () => {\n    if (intervalRef.current) clearInterval(intervalRef.current);\n    if (timeoutRef.current) clearTimeout(timeoutRef.current);\n    navigate('/');\n  };\n\n  const renderStatusMessage = () => {\n    switch (paymentStatus) {\n      case 'pending':\n        return <p>Waiting for payment... (STK prompt sent)</p>;\n      case 'success':\n        return <p style={{ color: 'green' }}>Payment Successful ✅ Loan processing started.</p>;\n      case 'cancelled':\n        return <p style={{ color: 'red' }}>Payment Cancelled ❌</p>;\n      case 'timeout':\n        return <p style={{ color: 'orange' }}>Request Timeout</p>;\n      case 'failed':\n        return <p style={{ color: 'red' }}>Payment Failed ❌</p>;\n      default:\n        return null;\n    }\n  };\n\n  /* ---------------- UI ---------------- */\n  return (\n    <div className=\"approval-container\">\n      <div className=\"approval-card\">\n\n        <div className=\"approval-header\">\n          <p>\n            Hi {formData.name || 'User'}, select a loan option below.\n            Terms and conditions apply.\n          </p>\n        </div>\n\n        <div className=\"approval-body\">\n\n          {/* -------- LOAN OPTIONS -------- */}\n          <div className=\"loan-options\">\n            <h4>Select a loan option</h4>\n\n            {loanOffers.map((offer) => (\n              <div\n                key={offer.id}\n                className={`loan-option-card ${\n                  selectedLoan?.id === offer.id ? 'selected' : ''\n                }`}\n                onClick={() => setSelectedLoan(offer)}\n              >\n                <div>\n                  <strong>Ksh. {offer.amount.toLocaleString()}</strong>\n                  <p>Duration: {offer.duration}</p>\n                  <p>Interest: {offer.interest}</p>\n                </div>\n\n                <div>\n                  Verification Fee: <strong>Ksh. {offer.verificationFee}</strong>\n                </div>\n              </div>\n            ))}\n          </div>\n\n          {/* -------- SUMMARY -------- */}\n          <div className=\"approval-table\">\n            <div className=\"approval-row\">\n              <span className=\"approval-label\">Loan Tracking ID:</span>\n              <span className=\"approval-value\">{trackingId}</span>\n            </div>\n\n            <div className=\"approval-row\">\n              <span className=\"approval-label\">MPESA Number:</span>\n              <span className=\"approval-value\">{formData.phone || 'N/A'}</span>\n            </div>\n\n            <div className=\"approval-row\">\n              <span className=\"approval-label\">Selected Loan:</span>\n              <span className=\"approval-value\">\n                {selectedLoan ? `Ksh. ${selectedLoan.amount.toLocaleString()}` : 'None'}\n              </span>\n            </div>\n\n            <div className=\"approval-row\">\n              <span className=\"approval-label\">Verification Fee:</span>\n              <span className=\"approval-value\">\n                {selectedLoan ? `Ksh. ${selectedLoan.verificationFee}` : '-'}\n              </span>\n            </div>\n          </div>\n\n          <div className=\"approval-footer\">\n            {renderStatusMessage()}\n\n            <button\n              onClick={handleGetLoan}\n              className=\"get-loan-btn\"\n              disabled={isLoading || !selectedLoan || paymentStatus === 'success'}\n            >\n              {isLoading ? 'Processing...' : 'Get Loan Now'}\n            </button>\n\n            <div className=\"approval-footer-text\">\n              © 2025. All rights reserved. Go back{' '}\n              <span onClick={handleGoBack} style={{ cursor: 'pointer' }}>home</span>\n            </div>\n          </div>\n\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default LoanApproval;\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}