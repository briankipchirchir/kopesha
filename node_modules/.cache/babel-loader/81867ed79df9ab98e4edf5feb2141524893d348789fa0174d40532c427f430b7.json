{"ast":null,"code":"import React,{useEffect,useState}from'react';import PhoneMockup from'./PhoneMockup';import LoanForm from'./LoanForm';import'../styles/LoanHomepage.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const LoanHomepage=()=>{const[applications,setApplications]=useState([]);const[currentIndex,setCurrentIndex]=useState(0);// Fetch latest 10 applications\nuseEffect(()=>{fetch(\"https://kopesha-backend-3.onrender.com/api/loans/all\").then(res=>res.json()).then(data=>{const sorted=data.sort((a,b)=>b.id-a.id).slice(0,100);setApplications(sorted);}).catch(err=>console.error(\"Error fetching loans:\",err));},[]);// Rotate every 5 seconds\nuseEffect(()=>{const interval=setInterval(()=>{if(applications.length>0){setCurrentIndex(prev=>(prev+1)%applications.length);}},5000);return()=>clearInterval(interval);},[applications]);const currentApp=applications[currentIndex];return/*#__PURE__*/_jsxs(\"div\",{className:\"loan-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"loan-left-section\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"loan-logo\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"KOPESHA\"}),/*#__PURE__*/_jsx(\"p\",{children:\"LOAN\"})]}),/*#__PURE__*/_jsx(PhoneMockup,{}),/*#__PURE__*/_jsx(\"h1\",{className:\"loan-heading\",children:\"Kopesha Loan\"}),/*#__PURE__*/_jsx(\"p\",{className:\"loan-description\",children:\"Let us help you sort your expenses - top up a loan, rental loan, car loan or emergencies\"})]}),currentApp&&/*#__PURE__*/_jsxs(\"div\",{className:\"transaction-card fade-transaction\",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"transaction-name\",children:[currentApp.name,\" \",currentApp.phone.slice(0,3),\"xxx\",currentApp.phone.slice(-3)]}),/*#__PURE__*/_jsxs(\"div\",{className:\"transaction-amount\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Received Ksh.\"}),/*#__PURE__*/_jsx(\"span\",{className:\"amount-value\",children:currentApp.loanAmount.toLocaleString()}),/*#__PURE__*/_jsxs(\"span\",{className:\"loan-type\",children:[currentApp.loanType.charAt(0).toUpperCase()+currentApp.loanType.slice(1),\" Loan\"]})]}),/*#__PURE__*/_jsx(\"p\",{className:\"transaction-time\",children:\"Just Now\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"loan-right-section\",children:/*#__PURE__*/_jsx(LoanForm,{})})]});};export default LoanHomepage;","map":{"version":3,"names":["React","useEffect","useState","PhoneMockup","LoanForm","jsx","_jsx","jsxs","_jsxs","LoanHomepage","applications","setApplications","currentIndex","setCurrentIndex","fetch","then","res","json","data","sorted","sort","a","b","id","slice","catch","err","console","error","interval","setInterval","length","prev","clearInterval","currentApp","className","children","name","phone","loanAmount","toLocaleString","loanType","charAt","toUpperCase"],"sources":["/home/kipchirchir/loan/kopesha-loan-app/src/components/LoanHomepage.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport PhoneMockup from './PhoneMockup';\nimport LoanForm from './LoanForm';\nimport '../styles/LoanHomepage.css';\n\nconst LoanHomepage = () => {\n  const [applications, setApplications] = useState([]);\n  const [currentIndex, setCurrentIndex] = useState(0);\n\n  // Fetch latest 10 applications\n  useEffect(() => {\n    fetch(\"https://kopesha-backend-3.onrender.com/api/loans/all\")\n      .then(res => res.json())\n      .then(data => {\n        const sorted = data.sort((a, b) => b.id - a.id).slice(0, 100);\n        setApplications(sorted);\n      })\n      .catch(err => console.error(\"Error fetching loans:\", err));\n  }, []);\n\n  // Rotate every 5 seconds\n  useEffect(() => {\n    const interval = setInterval(() => {\n      if (applications.length > 0) {\n        setCurrentIndex(prev => (prev + 1) % applications.length);\n      }\n    }, 5000);\n    return () => clearInterval(interval);\n  }, [applications]);\n\n  const currentApp = applications[currentIndex];\n\n  return (\n    <div className=\"loan-container\">\n      {/* Left Section */}\n      <div className=\"loan-left-section\">\n        <div>\n          <div className=\"loan-logo\">\n            <p>KOPESHA</p>\n            <p>LOAN</p>\n          </div>\n\n          <PhoneMockup />\n\n          <h1 className=\"loan-heading\">Kopesha Loan</h1>\n          <p className=\"loan-description\">\n            Let us help you sort your expenses - top up a loan, rental loan, car loan or emergencies\n          </p>\n        </div>\n\n        {/* Rotating Transaction Card */}\n        {currentApp && (\n          <div className=\"transaction-card fade-transaction\">\n            <p className=\"transaction-name\">\n              {currentApp.name} {currentApp.phone.slice(0, 3)}xxx{currentApp.phone.slice(-3)}\n            </p>\n\n            <div className=\"transaction-amount\">\n              <span>Received Ksh.</span>\n              <span className=\"amount-value\">{currentApp.loanAmount.toLocaleString()}</span>\n              <span className=\"loan-type\">\n                {currentApp.loanType.charAt(0).toUpperCase() + currentApp.loanType.slice(1)} Loan\n              </span>\n            </div>\n\n            <p className=\"transaction-time\">Just Now</p>\n          </div>\n        )}\n      </div>\n\n      {/* Right Section */}\n      <div className=\"loan-right-section\">\n        <LoanForm />\n      </div>\n    </div>\n  );\n};\n\nexport default LoanHomepage;\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAClD,MAAO,CAAAC,WAAW,KAAM,eAAe,CACvC,MAAO,CAAAC,QAAQ,KAAM,YAAY,CACjC,MAAO,4BAA4B,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAEpC,KAAM,CAAAC,YAAY,CAAGA,CAAA,GAAM,CACzB,KAAM,CAACC,YAAY,CAAEC,eAAe,CAAC,CAAGT,QAAQ,CAAC,EAAE,CAAC,CACpD,KAAM,CAACU,YAAY,CAAEC,eAAe,CAAC,CAAGX,QAAQ,CAAC,CAAC,CAAC,CAEnD;AACAD,SAAS,CAAC,IAAM,CACda,KAAK,CAAC,sDAAsD,CAAC,CAC1DC,IAAI,CAACC,GAAG,EAAIA,GAAG,CAACC,IAAI,CAAC,CAAC,CAAC,CACvBF,IAAI,CAACG,IAAI,EAAI,CACZ,KAAM,CAAAC,MAAM,CAAGD,IAAI,CAACE,IAAI,CAAC,CAACC,CAAC,CAAEC,CAAC,GAAKA,CAAC,CAACC,EAAE,CAAGF,CAAC,CAACE,EAAE,CAAC,CAACC,KAAK,CAAC,CAAC,CAAE,GAAG,CAAC,CAC7Db,eAAe,CAACQ,MAAM,CAAC,CACzB,CAAC,CAAC,CACDM,KAAK,CAACC,GAAG,EAAIC,OAAO,CAACC,KAAK,CAAC,uBAAuB,CAAEF,GAAG,CAAC,CAAC,CAC9D,CAAC,CAAE,EAAE,CAAC,CAEN;AACAzB,SAAS,CAAC,IAAM,CACd,KAAM,CAAA4B,QAAQ,CAAGC,WAAW,CAAC,IAAM,CACjC,GAAIpB,YAAY,CAACqB,MAAM,CAAG,CAAC,CAAE,CAC3BlB,eAAe,CAACmB,IAAI,EAAI,CAACA,IAAI,CAAG,CAAC,EAAItB,YAAY,CAACqB,MAAM,CAAC,CAC3D,CACF,CAAC,CAAE,IAAI,CAAC,CACR,MAAO,IAAME,aAAa,CAACJ,QAAQ,CAAC,CACtC,CAAC,CAAE,CAACnB,YAAY,CAAC,CAAC,CAElB,KAAM,CAAAwB,UAAU,CAAGxB,YAAY,CAACE,YAAY,CAAC,CAE7C,mBACEJ,KAAA,QAAK2B,SAAS,CAAC,gBAAgB,CAAAC,QAAA,eAE7B5B,KAAA,QAAK2B,SAAS,CAAC,mBAAmB,CAAAC,QAAA,eAChC5B,KAAA,QAAA4B,QAAA,eACE5B,KAAA,QAAK2B,SAAS,CAAC,WAAW,CAAAC,QAAA,eACxB9B,IAAA,MAAA8B,QAAA,CAAG,SAAO,CAAG,CAAC,cACd9B,IAAA,MAAA8B,QAAA,CAAG,MAAI,CAAG,CAAC,EACR,CAAC,cAEN9B,IAAA,CAACH,WAAW,GAAE,CAAC,cAEfG,IAAA,OAAI6B,SAAS,CAAC,cAAc,CAAAC,QAAA,CAAC,cAAY,CAAI,CAAC,cAC9C9B,IAAA,MAAG6B,SAAS,CAAC,kBAAkB,CAAAC,QAAA,CAAC,0FAEhC,CAAG,CAAC,EACD,CAAC,CAGLF,UAAU,eACT1B,KAAA,QAAK2B,SAAS,CAAC,mCAAmC,CAAAC,QAAA,eAChD5B,KAAA,MAAG2B,SAAS,CAAC,kBAAkB,CAAAC,QAAA,EAC5BF,UAAU,CAACG,IAAI,CAAC,GAAC,CAACH,UAAU,CAACI,KAAK,CAACd,KAAK,CAAC,CAAC,CAAE,CAAC,CAAC,CAAC,KAAG,CAACU,UAAU,CAACI,KAAK,CAACd,KAAK,CAAC,CAAC,CAAC,CAAC,EAC7E,CAAC,cAEJhB,KAAA,QAAK2B,SAAS,CAAC,oBAAoB,CAAAC,QAAA,eACjC9B,IAAA,SAAA8B,QAAA,CAAM,eAAa,CAAM,CAAC,cAC1B9B,IAAA,SAAM6B,SAAS,CAAC,cAAc,CAAAC,QAAA,CAAEF,UAAU,CAACK,UAAU,CAACC,cAAc,CAAC,CAAC,CAAO,CAAC,cAC9EhC,KAAA,SAAM2B,SAAS,CAAC,WAAW,CAAAC,QAAA,EACxBF,UAAU,CAACO,QAAQ,CAACC,MAAM,CAAC,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC,CAAGT,UAAU,CAACO,QAAQ,CAACjB,KAAK,CAAC,CAAC,CAAC,CAAC,OAC9E,EAAM,CAAC,EACJ,CAAC,cAENlB,IAAA,MAAG6B,SAAS,CAAC,kBAAkB,CAAAC,QAAA,CAAC,UAAQ,CAAG,CAAC,EACzC,CACN,EACE,CAAC,cAGN9B,IAAA,QAAK6B,SAAS,CAAC,oBAAoB,CAAAC,QAAA,cACjC9B,IAAA,CAACF,QAAQ,GAAE,CAAC,CACT,CAAC,EACH,CAAC,CAEV,CAAC,CAED,cAAe,CAAAK,YAAY","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}